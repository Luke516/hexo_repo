title: 自由軟體與社群發展心得<四>
date: 2014-11-21 04:16:38
tags:
- 自由軟體
- 社群
category:
- 自由軟體與社群
---

這是11/14的自由軟體課程~~

今天為我們分享的，是上星期也來跟我們分享過的Frank(lin)大大！在上個禮拜，我們認識了ezgo裡面形形色色的自由軟體；而今天，
Frank將會更深入的探討ezgo背後所需要的技術與遇到的問題。
<!--more-->

而首先提到的，就是ezgo裡面的自由軟體在地化的過程！

###自由軟體的國際化與在地化###

一開始，Frank似乎為了怕大家睡著XD，先以遊戲當作例子來講解翻譯過程中可能遇到的問題。它先舉了<魔法門3-幻島歷險記>(1991)和
<凱蘭迪亞傳奇>(1992)為例(這兩款遊戲都比我們還老)。Frank說，許多當時的遊戲都是外國開發的，要等翻譯可能都要等個兩年左右。
除此之外，有時還會因為解析度不夠的問題(在魔法門3中，一個字高度只有8像素)，只能用簡體中文來翻譯。

![經典遊戲魔法門第三代，可發現文字很擠](http://i.imgur.com/NOtAfuB.png)

Frank想告訴我們的重點是，翻譯遊戲在當時是個非常浩大的工程，因為文字都是用一個一個像素畫出來的。就算之後我們有了unicode
編碼等種種機制，也沒辦法完全解決在翻譯過程中所遇到的問題。

簡言之，在翻譯文字的過程中可能遇到的問題有以下幾點：
1.訊息的修改
2.字型的處理
3.編碼

除了文字之外，還有許多問題是我們可能遇到的：
1.數字，1.000或1,000(歐洲大部分相反)
2.年分，西元、民國、日本
3.日期，mm/dd/yy，yyyy/mm/dd
4.金錢，台幣、美金、歐元、日幣......
5.度量衡，英尺、公尺

為了解些問題，就產生了現在大家應該都十分熟悉的"國際化"機制：

####國際化####

在維基百科上，對國際化的定義是這樣的：

國際化是指在設計軟體，將軟體與特定語言及地區脫鉤的過程。當軟體被移植到不同的語言及地區時，軟體本身不用做內部工程上的
改變或修正。

簡單的流程 ： 原始程式 → 把訊息分離出來"編索引" → 產生原始訊息檔案 → 只要翻譯訊息檔即可 → 顯示訊息時依據索引。這其實就是
一種基本的抽象化概念，把程式架構與訊息內容分離開來。

Frank也提到對中文自由軟體界影響深遠的CLE(Chinese Linux Extension)，Linux中文延伸套件計畫，也是linux的中文化始祖。
所謂的extension，也就是要修改原始程式，加入中文支援，重新編譯打包。多虧了這群人當時積極的與原始開發團隊合作，加入國際化
的架構，現在的linux中文環境才會這麼完善，許多linux相關的地方都有留下他們的痕跡喔(linux，glibc，Qt，GTK+，KDE，Gnome)！

####在地化####

有個國際化的架構，當然也需要有在地化來配合不同的環境啦！

Frank提到，在國際化的架構中，會有獨立出來的部分，我們稱為"區域環境資料庫"(locale)，會在執行期視執行環境而決定。
locale中可能包含的資訊有：語言、文字(左到右、右到左)、符號、數字、或度量衡排序方法等。

至於所謂的在地化，其實就是根據國際化的架構，在區域環境資料庫中填入特定地區文化的資料。而目前在地化的工作多半屬於訊息的
翻譯，畢竟其他部分大都有人做了(感謝先人的努力 QWQ)。

接著Frank就提到了一個對自由軟體的國際化與在地化十分重要的工具──Gettext(1995年釋出GNU版本)，這個工具就可以把訊息與程式
本身分離，而取出來的訊息檔稱為PO template(.pot檔)，這樣在地化就只需翻譯其中內容，翻譯出來成為po檔，最後再編譯成mo檔。

後面是檔案的一些細節，像是po檔分為檔頭與條目，檔頭裡面有許多很重要的資訊，例如複數形的定義，依不同語言可能非常複雜。

而條目分為幾部分：
旗標(位置、語言等)
註解(補充說明)
問題：同樣的字，不同意義，因此需要註解

印象很深刻的是Frank講到windows內建的彈珠台遊戲，在每次少一顆彈珠時底下會出現"左側:X"的訊息，我以前也不知道是什麼意思，
直到今天Frank告訴我們原來是翻譯錯誤！原文的"left"是指剩下幾顆彈珠，但因為翻譯者看不到上下文，所以翻成"左側"XD，這也說明
了註解的重要性！

![windows彈珠台，可以看到右下方的"left:1"，中文竟然翻成"左側:1"](http://i.imgur.com/6M2hEDa.png)

還有一個例子，是security這個英文單字，一般應該都會認為是安全之類的意思吧！但是Frank在翻譯理財軟體時，卻發現還有抵押品、
或是跟證券有關的意思。可見翻譯也真不是一門簡單的學問！

最後Frank告訴大家，其實要做軟體的在地化真的不難！你只需要：
1.工具(文字編輯器、lokalize)
2.外文能力
3.熱心和耐心
就能夠加入翻譯的行列！

他還提出了一些線上共筆翻譯的網站給大家參考，如Launchpad pootle transifex tryneeds等等，有興趣的自己去看看吧！


###ezgo打包技術初窺探###

在第二個部分，Frank分享ezgo打包的技術。

####ezgo核心特色####

之前就說過，ezgo主要的目的是為了推廣給沒有用過自由軟體的人。因此在打包時也要從推廣面來思考：
1.目標客群的需要
2.自身的特色

Frank提到，對大多數非資訊背景的人而言，什麼作業系統或桌面系統不太重要，應用程式才是重點。因此這也是ezgo的大方向。這也是
為什麼他們要花功夫整理開始功能表，為不同應用程式添加標籤，就是為了讓所有使用者更方便使用各樣應用程式。

除此之外，為了讓用慣windows的使用者不至於感到太生疏，ezgo的操作模式也特意採類似windows的方式。例如：保留開始功能表、按
ctrl+alt+delete會出現系統管理員(linux預設是關機)等等。Frank還提到有個老師製作的系統ACFS，所有圖示都跟WINDOWS一樣就是為
了讓使用者能無縫接軌XD，不過ezgo沒這麼誇張，仍保有一些linux的特色。

而從技術面來講，Frank也說，其實ezgo算是一個客製化的distribution，並不算是一個獨立的linux版本。ezgo主要是在ubantu的基礎
上重新包裝而成的，就像剛剛提到的，畢竟ezgo真正在意的不是作業系統本身，而是自由軟體的推廣，再說linux現在也有夠多發行版
了，不需要再多一個增添大家的麻煩~~

####遇到的問題####

在一開始，ezgo的製作都是手動調整選單，一條一條去修改原始桌面系統裡的條目。因此也產生了不少問題，像是條目零散、不易管理
，每年都要重新來過等等，並且也不合國際的格式(debian)。

在Frank加入ezgo團隊後，目前努力的方向是：
1.盡可能遵循標準機制，並用自動化方式
2.使用外加設定檔(不動到原始檔案)
3.做成package(deb，rpm......)

(debian：linux的老祖宗，ubantu，mint都是他的後代)
debian-ezgo  (Debian Pure Blends) 遵循debian規範，包裝deb檔

####ezgo打包調校流程####
(以下，因為我也不完全理解內容，筆記雜亂，請見諒QWQ)

選單部分依照 XDG Menu Spec (Freedesktop.org) 詳細定義
刷新選單在 ezgomenu_database.csv 的檔案裡

桌布：每個桌面系統以不同方式抓取桌布
開關機動畫
開機Grub選單背景
登入背景
(傳遞核心訊息)

檔案系統：(客製化distribution)
揭開iso檔，修改完再包回去
squashfs 檔案系統
-unsquashfs
-mksquashfs
init ram disk

軟體
chroot
apt

使用者體驗
軟體預設
快捷鍵設定(EX：工作管理員)

調校過程，十分繁瑣，一個步驟出錯就要重來
需要用VM或外接硬碟測試

![ezgo調校過程(渣畫質見諒)](http://i.imgur.com/iUXfAgM.png)

而因為自動化的關係，ezgo現在也很方便的能做修改，也因此越來越多版本因不同需求而產生。像即將發布的ezgo12主要就有3個版本:
A 版：All in one, based on Kubuntu 14.04。以推廣為主，教室建置相關工具不放入。
B 版：Basic，只放入最基本的選單、桌面等。有不同桌面系統可選擇：
	Ubuntu 14.04
	Kubuntu 14.04
	Lubuntu 14.04
	Xubuntu 14.04
	Mint 17 Mate
C 版: Classroom, Kubuntu 14.04 & Xubuntu 14.04，加入中小學應用軟體，移除部份少用的應用程式，加入教室管理相關應用程式。
